<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Survey statistics</title>
  <meta name="description" content="The Survey">
  <meta name="author" content="Elizaveta Kantina">

  <link rel="stylesheet" href="css/styles.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
   <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> 
  
    <script type="text/javascript">
         var Q1Answers = [];
         var Q2Answers = [];
         var Q3Answers = [];
         var Q4Answers = [];
         var Q5Answers = [];
         var Q6Answers = [];

         CreateBarChart();

         function createArraysWithAnswersAndQuestions() {
             for (var i = 0; i < localStorage.length; i++) {
                 var item = localStorage.getItem("Answer_" + i);
                 if (item) {
                     var object = JSON.parse(item);
					 
                     Q1Answers.push(object.Q1);
                     Q2Answers.push(object.Q2);
                     Q3Answers.push(object.Q3);
                     Q4Answers.push(object.Q4);
                     Q5Answers.push(object.Q5);
                     Q6Answers.push(object.Q6);
                 }
             }
			 
			 			 
         }

         function calculateTheAnswers(array) {
             var obj = {};
             for (var i = 0; i< array.length; i++) {
                 obj[array[i]] = (obj[array[i]] || 0) + 1;
             }
             return obj;
		}
		 
		 
         function CreateBarChart() {
             google.charts.load('current', { 'packages': ['bar'] });
             google.charts.setOnLoadCallback(drawChart);
			 
             function drawChart() {
			 
                 createArraysWithAnswersAndQuestions();
				 
                 var Q1 = calculateTheAnswers(Q1Answers);
                 var Q2 = calculateTheAnswers(Q2Answers);
                 var Q3 = calculateTheAnswers(Q3Answers);
                 var Q4 = calculateTheAnswers(Q4Answers);
                 var Q5 = calculateTheAnswers(Q5Answers);
                 var Q6 = calculateTheAnswers(Q6Answers);
				 
						 
                 var data = google.visualization.arrayToDataTable([
                   ['Answer', 'Yes', 'No', 'Maybe'],
                   ['Question 1', Q1.yes, Q1.no, Q1.maybe],
                   ['Question 2', Q2.yes, Q2.no, Q2.maybe],
                   ['Question 3', Q3.yes, Q3.no, Q3.maybe],
                   ['Question 4', Q4.yes, Q4.no, Q4.maybe],
                   ['Question 5', Q5.yes, Q5.no, Q5.maybe],
                   ['Question 6', Q6.yes, Q6.no, Q6.maybe]
                 ]);
					
					console.log(data);
				 	 
                 var options = {
                     chart: {
                         title: 'Agreement / disagreement between survey participants'
                     },
                     bars: 'horizontal' // Required for Material Bar Charts.
                 };

                 var chart = new google.charts.Bar(document.getElementById('survey-results'));

                 chart.draw(data, options);
             }
         }
    </script>
</head>

<body>

<header>  
<h1>Survey Statistics</h1>

</header>

<div id="survey-results">    

</body>
</html>
